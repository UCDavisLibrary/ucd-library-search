
<dom-module id="ucd-library-search-databases">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        color: white;
        text-shadow: 1px 1px 1px black;
        display: block;

        -webkit-animation:bounceIn 400ms ease-out;
        -ms-animation:bounceIn 400ms ease-out;
        animation:bounceIn 400ms ease-out;
      }

      #az a {
        text-shadow: none;
        color: white;
        text-decoration: none;
        padding: 0;
        background: rgba(255, 255, 255, .3);
        padding: 5px;
        text-transform: capitalize;
        display: inline-block;
        transition: all 200ms linear;
      }
      #az a:hover {
        color: #002655;
        background: white;
      }
    </style>

    <h1>Databases</h1>
    <div class="help">Find collections of scholarly journal articles, digitized primary sources, streaming media, and more.</div>

    <!--<div style="margin-bottom: 4px">By Catagory</div>
    <div class="layout">
      <div class="flex">
        <select id="select" placeholder="Search Databases" on-change="_onChange" ></select>
      </div>
      <div>
        <a id="btn" class="search-btn">Search</a>
      </div>
    </div>-->

    <div style="margin-bottom: 4px">By Catagory</div>
    <div class="layout">
      <ucd-library-filter-list id="list" class="flex"></ucd-library-filter-list>
    </div>

    <div style="padding: 4px 0">A-Z</div>
    <div id="az"></div>

    

  </template>
  <script>
    Polymer({
      is: 'ucd-library-search-databases',

      rootUrl : 'https://www.library.ucdavis.edu',

      ready : function() {

        var data = [];

        // var html = '<option></option>';
        for( var i = 0; i < UCD_LIB_DB_TAXONOMY.length; i++ ) {
          var group = UCD_LIB_DB_TAXONOMY[i];
          var items = group.tags_repeater[0].tags;
          // html += '<optgroup label="'+group.anchor_label+'">';
          data.push({
            isHeader : true,
            section : group.anchor_label
          });
          
          for( var j = 0; j < items.length; j++ ) {
            // html += '<option value="'+items[j].slug+'">'+items[j].name+'</option>';
            data.push({
              section : group.anchor_label,
              url : this.rootUrl + '/tag/' + items[j].slug,
              label : items[j].name
            });
          }

          // html += '</optgroup>';
        }
        // this.$.select.innerHTML = html;
        this.$.list.data = data;

        var html = '';
        var i = 'a'.charCodeAt(0), j = 'z'.charCodeAt(0);
        for (; i <= j; ++i) {
            html += '<a class="style-scope ucd-library-search-databases" href="'+this.rootUrl+'/az-database/'+String.fromCharCode(i)+'">'+String.fromCharCode(i)+'</a>';
        }

        this.$.az.innerHTML = html;
      },

      _onChange : function() {
        var value = this.$.select.value;
        if( !value ) this.$.btn.removeAttribute('href');
        else this.$.btn.href = this.rootUrl + '/tag/' + value;
      }
    });
  </script>
</dom-module>
